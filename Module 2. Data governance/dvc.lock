schema: '2.0'
stages:
  prepare_data:
    cmd: python src/data/make_dataset.py --input_filepath data/raw/winequality-red.csv
      --output_filepath data/processed/
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/data/make_dataset.py
      md5: 6875d587f606a47567691d40fd4b64aa
      size: 2211
    outs:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
  data_visualization:
    cmd: python src/visualization/visualize.py --path_to_raw_data data/raw/winequality-red.csv
      --path_to_save_figs reports/figures
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/visualization/visualize.py
      md5: 582d677a029ad0f67eec136f796560ca
      size: 3104
    outs:
    - path: reports/figures/alcohol.png
      md5: 26bf60767f12d7cf669b116d4e0666e2
      size: 10900
    - path: reports/figures/chlorides.png
      md5: 2c6b279b5f4fabbae73892cacb77321c
      size: 15405
    - path: reports/figures/citric_acid.png
      md5: 036b79a00eda4985747d78d117dbd162
      size: 12166
    - path: reports/figures/fixed_acidity.png
      md5: f0c6e907979e15a2020c56ce5572e24b
      size: 10986
    - path: reports/figures/free_sulfur_dioxide.png
      md5: 7ea375a15008f93b173e61199d8613ff
      size: 14874
    - path: reports/figures/residual_sugar.png
      md5: 16dcc2790b6dee9be4734928f772b274
      size: 13813
    - path: reports/figures/sulphates.png
      md5: 9db4add1999c83f9ec71ab7824a88940
      size: 14089
    - path: reports/figures/total_sulfur_dioxide.png
      md5: 27e2fca18c8f8dc762447dbad64cdc4b
      size: 13812
    - path: reports/figures/volatile_acidity.png
      md5: 5a479a6f28cda5d4f88f4f89590d0333
      size: 13263
  train_the_model:
    cmd: python src/models/train_model.py --path_to_dataset data/processed/train.csv
      --path_to_model_storage models/ --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
    - path: src/models/train_model.py
      md5: 599169d09ef7ca26e3a1f4021d162195
      size: 2053
    params:
      params.yaml:
        train.C:
        - 0.8
        - 1
        - 1.2
        train.gamma:
        - 0.8
        - 1
        - 1.2
        train.kernel:
        - linear
        - rbf
    outs:
    - path: models/finalized_model.pkl
      md5: af50d69916d5568d28d7b3b0ed545814
      size: 42727
    - path: reports/metrics/hyper_params.json
      md5: 460840fe98192fcb3a571b600fe6112e
      size: 42
  evaluation:
    cmd: python src/models/validate_model.py --path_to_dataset data/processed/test.csv
      --path_to_model_pkl models/finalized_model.pkl --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: models/finalized_model.pkl
      md5: af50d69916d5568d28d7b3b0ed545814
      size: 42727
    - path: src/models/validate_model.py
      md5: 97c2ffcf0bafd9321c59e76a3542bd0d
      size: 2256
    params:
      params.yaml:
        C:
        - 0.8
        - 1
        - 1.2
        gamma:
        - 0.8
        - 1
        - 1.2
        kernel:
        - linear
        - rbf
    outs:
    - path: reports/metrics/accuracy.json
      md5: 30f014aa624e085303393b2702863344
      size: 21
    - path: reports/metrics/macro_avg.json
      md5: e87eda0fec4d471cd33af37a5fd71c8b
      size: 111
    - path: reports/metrics/metrics_per_class_0.json
      md5: 320812224e784f877a43bd4bd8521a2d
      size: 96
    - path: reports/metrics/metrics_per_class_1.json
      md5: 5e82f1f0896c83fa034b9de547fd4851
      size: 98
    - path: reports/metrics/weighted_avg.json
      md5: ddf3f8295b4fabd8cbd2e0b720230298
      size: 100

schema: '2.0'
stages:
  prepare_data:
    cmd: python src/data/make_dataset.py --input_filepath data/raw/winequality-red.csv
      --output_filepath data/processed/
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/data/make_dataset.py
      md5: 62f299e548ec7a43e28849abbf63dc22
      size: 2272
    outs:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
  data_visualization:
    cmd: python src/visualization/visualize.py --path_to_raw_data data/raw/winequality-red.csv
      --path_to_save_figs reports/figures
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/visualization/visualize.py
      md5: 9fcd34d091679f413e9e9bed80380c2c
      size: 3165
    outs:
    - path: reports/figures/alcohol.png
      md5: 7b007be746665f630d0361fe91c1f523
      size: 10880
    - path: reports/figures/chlorides.png
      md5: e37003a895f7e52996f0d93b178c50fd
      size: 15349
    - path: reports/figures/citric_acid.png
      md5: db4c24ff77acc424043dfecfa874326c
      size: 12168
    - path: reports/figures/fixed_acidity.png
      md5: 9cd0ad43edddd965631105ba84db60ab
      size: 11445
    - path: reports/figures/free_sulfur_dioxide.png
      md5: 658a0a6ba3543a3f57627f1c493c9b77
      size: 14904
    - path: reports/figures/residual_sugar.png
      md5: 497bfe3bab75756b5a98df22d5fec886
      size: 13847
    - path: reports/figures/sulphates.png
      md5: 32dfa2e9bdf7380c261620d9b75ad3c6
      size: 14070
    - path: reports/figures/total_sulfur_dioxide.png
      md5: cde7b46e32846606afe61e78fbee997b
      size: 13835
    - path: reports/figures/volatile_acidity.png
      md5: d0f6c0562a725af07fb8aca4959d9876
      size: 13254
  train_the_model:
    cmd: python src/models/train_model.py --path_to_dataset data/processed/train.csv
      --path_to_model_storage models/ --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
    - path: params.yaml
      md5: a3ea929944122f5e5e77779e822a4863
      size: 86
    - path: src/models/train_model.py
      md5: 88b31882fcc2377d2683e338b7e05120
      size: 3136
    params:
      params.yaml:
        train.C:
          upper_bound: 1e-10
          lower_bound: 10000000000.0
        train.penalty:
        - l1
        - l2
    outs:
    - path: models/finalized_model.pkl
      md5: 96bf7dfe9a0bdaf5d8f31cf780d4521f
      size: 1083
    - path: reports/features_importance/shap_values.png
      md5: d60cc50cb95cc22fbc8f387fa6a7bb6f
      size: 109203
    - path: reports/metrics/hyper_params.json
      md5: 85b8db8dab764cb2beadb14bb6fd8c94
      size: 43
  evaluation:
    cmd: python src/models/validate_model.py --path_to_dataset data/processed/test.csv
      --path_to_model_pkl models/finalized_model.pkl --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: models/finalized_model.pkl
      md5: 96bf7dfe9a0bdaf5d8f31cf780d4521f
      size: 1083
    - path: src/models/validate_model.py
      md5: e50e1ddd3de1fc857c36b54c5c457672
      size: 2203
    outs:
    - path: reports/metrics/metrics.json
      md5: b7729fa5901a0c9e2c3b11b05ee81136
      size: 105
    - path: reports/metrics/plots.json
      md5: 8d1dfce4b39af4df275539e8b5eee38d
      size: 3110

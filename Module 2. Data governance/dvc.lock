schema: '2.0'
stages:
  prepare_data:
    cmd: python src/data/make_dataset.py --input_filepath data/raw/winequality-red.csv
      --output_filepath data/processed/
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/data/make_dataset.py
      md5: 62f299e548ec7a43e28849abbf63dc22
      size: 2272
    outs:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
  data_visualization:
    cmd: python src/visualization/visualize.py --path_to_raw_data data/raw/winequality-red.csv
      --path_to_save_figs reports/figures
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/visualization/visualize.py
      md5: 9fcd34d091679f413e9e9bed80380c2c
      size: 3165
    outs:
    - path: reports/figures/alcohol.png
      md5: f02cdaba800de7e6ede0fe7b59b82dea
      size: 10891
    - path: reports/figures/chlorides.png
      md5: d5ea50d27271f9f2f0a14489a948c333
      size: 15383
    - path: reports/figures/citric_acid.png
      md5: a4ae842431eb4e8ec3dd8b88d35783bc
      size: 12212
    - path: reports/figures/fixed_acidity.png
      md5: 9e546c624a30450399d25261dc785f2d
      size: 11441
    - path: reports/figures/free_sulfur_dioxide.png
      md5: a204b1cf9e89ee2d42fff61b6bfbe887
      size: 14920
    - path: reports/figures/residual_sugar.png
      md5: 756ede679457806cfd3e429ceb1661b2
      size: 13841
    - path: reports/figures/sulphates.png
      md5: 5cf12a5cdc8418de9b543f6ce29865a9
      size: 14119
    - path: reports/figures/total_sulfur_dioxide.png
      md5: 9df9d8959c1655749853fae4e9b4a8ec
      size: 13815
    - path: reports/figures/volatile_acidity.png
      md5: 873d16eb3fce01d5fc08defc79e64454
      size: 13285
  train_the_model:
    cmd: python src/models/train_model.py --path_to_dataset data/processed/train.csv
      --path_to_model_storage models/ --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
    - path: params.yaml
      md5: a3ea929944122f5e5e77779e822a4863
      size: 86
    - path: src/models/train_model.py
      md5: 1050ae42542c03ee0dc35e66b8840293
      size: 2744
    params:
      params.yaml:
        train.C:
          upper_bound: 1e-10
          lower_bound: 10000000000.0
        train.penalty:
        - l1
        - l2
    outs:
    - path: models/finalized_model.pkl
      md5: 94834c0d519fa54fb827df9e4030be45
      size: 1083
    - path: reports/metrics/hyper_params.json
      md5: 9a146810d9cbdafa96e9e62539211744
      size: 43
  evaluation:
    cmd: python src/models/validate_model.py --path_to_dataset data/processed/test.csv
      --path_to_model_pkl models/finalized_model.pkl --path_to_metrics_storage reports/metrics
    deps:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: models/finalized_model.pkl
      md5: 94834c0d519fa54fb827df9e4030be45
      size: 1083
    - path: src/models/validate_model.py
      md5: d220489259e843edef74d0d60704c454
      size: 2206
    outs:
    - path: reports/metrics/metrics.json
      md5: b5c0e54426608ac2f51a6fdd1e0dc7b8
      size: 105
    - path: reports/metrics/plots.json
      md5: 67a88f7e38409e42c1c9f7faf02d8563
      size: 3226

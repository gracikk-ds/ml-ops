schema: '2.0'
stages:
  prepare_data:
    cmd: python src/data/make_dataset.py --input_filepath data/raw/winequality-red.csv
      --output_filepath data/processed/
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/data/make_dataset.py
      md5: b06e7d01173137c1f4a38fdff0ff1384
      size: 2257
    outs:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
  data_visualization:
    cmd: python src/visualization/visualize.py --path_to_raw_data data/raw/winequality-red.csv
      --path_to_save_figs reports/figures
    deps:
    - path: data/raw/winequality-red.csv
      md5: 6a883fd98624e18c0b7ce251f4fab4fb
      size: 100951
    - path: src/visualization/visualize.py
      md5: 6e89cc421a343e08841443122d292257
      size: 3183
    outs:
    - path: reports/figures/alcohol.png
      md5: 8c1c5d1cd84a4adf02fcf0bb3e47089a
      size: 10902
    - path: reports/figures/chlorides.png
      md5: b7b793d751cb73a91130429f2ca27be2
      size: 15387
    - path: reports/figures/citric_acid.png
      md5: 9989fc52f441791575520d4db048c701
      size: 12171
    - path: reports/figures/fixed_acidity.png
      md5: d18f3568761e7237f7104c3040246010
      size: 11441
    - path: reports/figures/free_sulfur_dioxide.png
      md5: c5e152adc569fe0714ee76331c3909d3
      size: 14895
    - path: reports/figures/residual_sugar.png
      md5: 65ea2f575dd652a48f287c222aee2537
      size: 13852
    - path: reports/figures/sulphates.png
      md5: 58fb4698fc4a1c2822f4fa52cf5c1729
      size: 14107
    - path: reports/figures/total_sulfur_dioxide.png
      md5: eb011abf6169a5dcde524966bc667528
      size: 13800
    - path: reports/figures/volatile_acidity.png
      md5: 0678364c20c3a714c7d5ad5e1d73ce45
      size: 13253
  train_the_model:
    cmd: python src/models/train_model.py --path_to_dataset data/processed/train.csv
      --experiment_name mlflow
    deps:
    - path: data/processed/train.csv
      md5: 84808f9205454b9a4ec584f2786c6fc6
      size: 286465
    - path: params.yaml
      md5: a3ea929944122f5e5e77779e822a4863
      size: 86
    - path: src/models/train_model.py
      md5: 134bc998138839c9428703366eceb1d6
      size: 4973
    params:
      params.yaml:
        train.C:
          upper_bound: 1e-10
          lower_bound: 10000000000.0
        train.penalty:
        - l1
        - l2
    outs:
    - path: reports/features_importance/shap_values.png
      md5: c951ea5109455db55b41cc50b34d947c
      size: 125730
  evaluation:
    cmd: python src/models/validate_model.py --path_to_dataset data/processed/test.csv
      --path_to_metrics_storage reports/metrics --experiment_name mlflow
    deps:
    - path: data/processed/test.csv
      md5: 773eabb436f0ca08c3cac7ce1f03bc50
      size: 71299
    - path: reports/features_importance/shap_values.png
      md5: c951ea5109455db55b41cc50b34d947c
      size: 125730
    - path: src/models/validate_model.py
      md5: 3c63276428fb61eae78c4c6222de43e6
      size: 3709
    outs:
    - path: reports/metrics/metrics.json
      md5: 1059351c751d5d624b58e6f5a62b3854
      size: 105
    - path: reports/metrics/plots.json
      md5: 808eccd3b998a0030c279341759c17d8
      size: 4155
